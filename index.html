<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">
	<!-- 新增WebGL兼容配置 -->
	<meta name="webgl" content="true">
	<meta name="allow-webgl" content="true">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="Expires" content="0">
	<meta http-equiv="Access-Control-Allow-Origin" content="*">
	<meta http-equiv="x-rim-auto-match" content="none">
	<meta name="format-detection" content="telephone=no">
	<meta name="full-screen" content="yes">
	<meta name="x5-fullscreen" content="true">
	<meta name="360-fullscreen" content="true">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="x5-page-mode" content="app">
	<meta name="browsermode" content="application">
	<title>YYSMART | FlashGame</title>
	<link rel="shortcut icon" href="TemplateData/favicon.ico">
	<link rel="stylesheet" href="TemplateData/style.css">
	<style>
		/* 原有样式保留 */
		html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video, button {
			margin: 0;
			padding: 0;
			font-style: normal;
		}

		html {
			font-size: 12px;
		}

			html body {
				-webkit-text-size-adjust: none !important;
				-moz-text-size-adjust: none !important;
				-ms-text-size-adjust: none !important;
				text-size-adjust: none !important;
			}

		a {
			text-decoration: none;
		}

			a:hover, a:active, a:visited, a:link, a:focus {
				-webkit-tap-highlight-color: rgba(0,0,0,0);
				-webkit-tap-highlight-color: transparent;
				outline: none;
			}

		body, html {
			height: 100%;
			overflow: hidden;
			position: relative;
			top: 0px;
			left: 0px;
		}

		.landscape-screen {
			transform-origin: top left;
			transform: rotate(90deg) translateY(-100%)
		}

		#Frame {
			border-style: unset;
			display: block;
			/* 新增WebGL渲染优化 */
			-webkit-backface-visibility: hidden;
			backface-visibility: hidden;
			perspective: 1000px;
		}
	</style>
</head>
<body>
	<iframe id="Frame" style="Frame" src=""
    	<!-- 禁用iframe的渲染限制 -->
    	allow="camera *; microphone *; fullscreen *; webgl *; accelerometer *"
    	allowfullscreen="true"
    	webkitallowfullscreen="true"
    	mozallowfullscreen="true">
    </iframe>
	<script>
		var orientation = window.orientation;
		var Frame = document.getElementById("Frame");

		// 直接设置game.html，保留基础跳转
		if (Frame) {
			Frame.src = "game.html";
		} else {
			console.error("未找到ID为Frame的iframe元素");
		}

		if (orientation == 180 || orientation == 0 || orientation == -180) {
			Frame.height = window.innerWidth;
			Frame.width = window.innerHeight;
			Frame.classList.add("landscape-screen");
		} else {
			Frame.height = window.innerHeight;
			Frame.width = window.innerWidth;
			Frame.classList.remove("landscape-screen");
		}

		window.onorientationchange = function () {
			orientation = window.orientation;
			if (orientation == 180 || orientation == 0 || orientation == -180) {
				Frame.classList.add("landscape-screen");
			} else {
				Frame.classList.remove("landscape-screen");
			}
			// 旋转后重置iframe渲染上下文
			Frame.style.display = 'none';
			setTimeout(() => Frame.style.display = 'block', 50);
		};

		// 屏蔽不必要的媒体设备报错
		if (!navigator.mediaDevices) {
			navigator.mediaDevices = {
				getUserMedia: () => Promise.reject('Camera access disabled'),
				enumerateDevices: () => Promise.resolve([])
			};
		}
	</script>
</body>
</html>
